# 2023년 기준 직무별 인원 입력 & 기본급 확정 가이드

## 📊 현재 2023년 노임단가 (기술등급별)

| 기술등급 | 일급 | 출처 |
|---------|------|------|
| 특급기술자 | 350,000원 | |
| 고급기술자 | 293,753원 | 건설업 노임단가 2023 |
| 중급기술자 | 246,709원 | 건설업 노임단가 2023 |
| 초급기술자 | 217,342원 | 건설업 노임단가 2023 |
| 단순노무종사원 | 84,618원 | 건설업 노임단가 2023 |

---

## 🎯 직무코드 확정하기

### Step 1: 사용할 직무 선택

**추천 직무 조합**:

#### 옵션 A: 최소 구성 (5개 직무)
- M101: 소장 (고급기술자)
- T301: 안전관리자 (중급기술자)
- T302: 품질관리자 (중급기술자)
- D201: 운전기사 (단순노무종사원)
- E501: 환경원 (단순노무종사원)

#### 옵션 B: 표준 구성 (7개 직무)
- M101: 소장 (고급기술자)
- M102: 부소장 (고급기술자)
- T301: 안전관리자 (중급기술자)
- T302: 품질관리자 (중급기술자)
- D201: 운전기사 (단순노무종사원)
- E501: 환경원 (단순노무종사원)
- E502: 청소원 (단순노무종사원)

#### 옵션 C: 전체 구성 (10개 직무)
- 위의 모든 직무 사용

---

## 📝 수정 방법

### 방법 1: 노임단가 수정 (기술등급별 일괄 변경)

**파일**: `data/wages_master.json`

**VSCode에서**:
1. `Ctrl + P` → `wages_master.json` 입력
2. 2023년 섹션 수정:
   ```json
   "2023": {
     "특급기술자": 350000,
     "고급기술자": 300000,     ← 수정 (예시)
     "중급기술자": 250000,     ← 수정 (예시)
     "초급기술자": 220000,     ← 수정 (예시)
     "단순노무종사원": 85000   ← 수정 (예시)
   }
   ```
3. `Ctrl + S` 저장

---

### 방법 2: 특정 직무만 기본급 변경 (SQL 수정)

**파일**: `src/domain/migrations/20260211_04_fix_2023_wages.sql` (새 파일)

**VSCode에서**:
1. `Ctrl + N` (새 파일)
2. 다음 내용 입력:
   ```sql
   -- 2023년 특정 직무 기본급 수정

   -- 소장 기본급을 300,000원으로 변경
   UPDATE md_job_rate
   SET wage_day = 300000, wage_hour = 37500
   WHERE scenario_id = 'year_2023' AND job_code = 'M101';

   -- 안전관리자 기본급을 250,000원으로 변경
   UPDATE md_job_rate
   SET wage_day = 250000, wage_hour = 31250
   WHERE scenario_id = 'year_2023' AND job_code = 'T301';
   ```
3. `Ctrl + Shift + S` → 경로: `src/domain/migrations/20260211_04_fix_2023_wages.sql`
4. 저장

---

### 방법 3: 사용하지 않는 직무 비활성화

**SQL 파일 생성**: `src/domain/migrations/20260211_05_disable_unused_jobs.sql`

```sql
-- 사용하지 않는 직무 비활성화 (2023년)

UPDATE md_job_role
SET is_active = 0
WHERE scenario_id = 'year_2023'
  AND job_code IN ('M103', 'T303', 'E503');
  -- 필요없는 직무코드 나열
```

---

## 🎬 적용하기

### 1. 마이그레이션 실행

**터미널에서**:
```bash
python -c "from src.domain.db import get_connection; from src.domain.migration_runner import run_migrations; conn = get_connection(); run_migrations(conn); conn.close(); print('[OK] 적용 완료')"
```

**또는 앱 재시작** (자동으로 마이그레이션 실행됨):
```bash
python src/main.py
```

### 2. 결과 확인

**터미널에서**:
```bash
sqlite3 "C:\Users\helpbiz\AppData\Local\auto_fm\app.db" "SELECT job_code, job_name, wage_day, is_active FROM md_job_role JOIN md_job_rate USING (scenario_id, job_code) WHERE scenario_id = 'year_2023' ORDER BY job_code;"
```

---

## 📊 확정 예시

### 예시 1: 5개 직무 확정 (표준 현장)

| 직무코드 | 직무명 | 인원 | 일급 | 월 노무비 |
|---------|--------|------|------|----------|
| M101 | 소장 | 1명 | 293,753원 | 6,055,312원 |
| T301 | 안전관리자 | 1명 | 246,709원 | 5,082,205원 |
| T302 | 품질관리자 | 1명 | 246,709원 | 5,082,205원 |
| D201 | 운전기사 | 2명 | 84,618원 | 3,486,261원 |
| E501 | 환경원 | 3명 | 84,618원 | 5,229,392원 |

**총 8명 / 월 노무비 합계: 약 24,935,375원**

---

## 🔢 기본급(일급) 계산 참고

### 월급 → 일급 환산
```
일급 = 월급 ÷ 20.6일
```

### 일급 → 시간급 환산
```
시간급 = 일급 ÷ 8시간
```

### 예시
- 월급 600만원 → 일급 291,262원 → 시간급 36,408원
- 월급 500만원 → 일급 242,718원 → 시간급 30,340원

---

## 💾 빠른 저장 템플릿

### 템플릿 1: 기본 5직무 (복사해서 사용)

**job_mapping.json**:
```json
{
  "M101": {"title": "소장", "grade": "고급기술자"},
  "T301": {"title": "안전관리자", "grade": "중급기술자"},
  "T302": {"title": "품질관리자", "grade": "중급기술자"},
  "D201": {"title": "운전기사", "grade": "단순노무종사원"},
  "E501": {"title": "환경원", "grade": "단순노무종사원"}
}
```

### 템플릿 2: 표준 7직무

**job_mapping.json**:
```json
{
  "M101": {"title": "소장", "grade": "고급기술자"},
  "M102": {"title": "부소장", "grade": "고급기술자"},
  "T301": {"title": "안전관리자", "grade": "중급기술자"},
  "T302": {"title": "품질관리자", "grade": "중급기술자"},
  "D201": {"title": "운전기사", "grade": "단순노무종사원"},
  "E501": {"title": "환경원", "grade": "단순노무종사원"},
  "E502": {"title": "청소원", "grade": "단순노무종사원"}
}
```

---

## ✅ 최종 확인 체크리스트

- [ ] `wages_master.json` 2023년 노임단가 확인
- [ ] `job_mapping.json` 필요한 직무코드만 등록
- [ ] 마이그레이션 SQL 파일 생성 (필요시)
- [ ] 마이그레이션 실행 또는 앱 재시작
- [ ] DB에서 결과 확인
- [ ] 앱에서 2023년 선택 → 직무 입력 테스트

---

**작성일**: 2026-02-11
