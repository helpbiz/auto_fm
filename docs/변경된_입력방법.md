# 변경된 입력 방법 (4단계 워크플로우)

리팩터링 후 **입력과 저장 순서**가 아래 4단계로 고정되었습니다.  
기존처럼 “저장만 하고 집계는 나중에” 하는 방식은 **저장 버튼이 비활성화**되므로, 반드시 **집계 실행 → 저장** 순서로 진행해야 합니다.

---

## 1. 4단계 순서 (필수)

| 단계 | 내용 | 사용자 동작 |
|------|------|-------------|
| **1) 시나리오명** | 작업할 시나리오 이름 정하기 | 좌측 **시나리오명** 란에 입력 (영문·숫자·`-`, `_` 권장) |
| **2) 기본 데이터 입력** | 직무·인원·경비만 입력 (이 단계에서는 **계산/집계 없음**) | **직무별 인원입력** 탭, **경비입력** 탭에서 값 입력·수정 |
| **3) 집계 실행** | 입력된 데이터로 노무비·경비를 **한 번 계산**해 결과(스냅샷) 생성 | 하단 **집계 실행** 버튼 클릭 |
| **4) 시나리오 저장** | 현재 시나리오명으로 입력+집계 결과 저장 | 하단 **시나리오 저장** 버튼 클릭 |

- **2단계**에서는 숫자·직무·경비만 넣고, **3단계(집계 실행)** 를 반드시 한 번 이상 실행해야 합니다.
- **4단계(저장)** 는 **3단계를 한 번이라도 실행한 뒤에만** 가능합니다.

---

## 2. 변경된 점 요약

### 2.1 저장이 “집계 후에만” 가능

- **이전**: 시나리오 저장 → (원하면 나중에) 집계 실행  
- **현재**:
  - **집계 실행**을 한 번도 하지 않으면 **시나리오 저장** 버튼이 **비활성화**됩니다.
  - 저장 버튼을 눌러도 “저장하려면 먼저 **집계 실행**을 실행하세요.” 메시지가 나오며 저장되지 않습니다.
  - **집계 실행**을 한 번 실행한 뒤에만 **시나리오 저장**이 가능합니다.

즉, **입력만 하고 저장하려면 반드시 그 사이에 “집계 실행” 한 번**이 들어가야 합니다.

### 2.2 버튼 활성/비활성

| 버튼 | 활성화 조건 |
|------|-------------|
| **집계 실행** | 테이블 셀 편집 중이 **아닐** 때 (다른 셀 클릭 또는 Enter로 편집 종료 후) |
| **시나리오 저장** | **집계 실행을 한 번이라도 한 뒤** (집계 결과 스냅샷이 있을 때만) |
| **요약 PDF / 상세 Excel 내보내기** | 위와 동일하게, **집계 실행을 한 번이라도 한 뒤** |

- 집계를 하지 않으면 저장·내보내기 버튼이 비활성화됩니다.

### 2.3 입력 중에는 “자동 집계” 없음

- **직무별 인원입력**이나 **경비입력**을 수정해도 **전체 집계가 자동으로 다시 실행되지는 않습니다.**
- **노무비 상세**·**경비입력**의 인적보험 7종 등 **일부 항목**만 화면에서 자동 계산·갱신됩니다.
- **요약 / 노무비 상세 / 경비 상세** 전체를 다시 반영하려면 반드시 **집계 실행** 버튼을 눌러야 합니다.

---

## 3. 권장 작업 흐름

1. **시나리오명** 입력 (새로 하거나, 불러올 시나리오명으로).
2. **직무별 인원입력** 탭에서 직무·인원·근무일 등 입력.
3. **경비입력** 탭에서 경비코드별 세부 수량·단가 입력.
4. **(선택)** 시나리오를 나중에 다시 쓰려면 → **집계 실행** 클릭.
5. **시나리오 저장** 클릭 (집계를 한 번이라도 한 뒤에만 가능).
6. 필요 시 **요약 PDF** 또는 **상세 Excel** 내보내기 (역시 집계 후에만 가능).

**정리**:  
- **입력만 하고 저장하고 싶다** → 반드시 **집계 실행** 한 번 → **시나리오 저장**.  
- **저장 버튼이 비활성화되어 있다** → 먼저 **집계 실행**을 한 번 실행한 뒤 다시 시도.

---

## 4. 기존 매뉴얼과의 대응

- **화면 구성**, **직무별 인원입력/경비입력** 탭의 **컬럼·입력 방법**은 기존 **사용자_입력_매뉴얼.md** 와 동일합니다.
- **시나리오 불러오기**, **시나리오 비교** 탭, **인적보험 7종 자동 계산** 등도 이전과 같습니다.
- 바뀐 것은 **“저장은 집계 후에만 가능하다”**는 **순서와 버튼 활성 조건**뿐입니다.
